<DOCTYPE html>
<html pt="pt-br">
	<head>
		<script>
		function d2(m) {
			var d = m[0] * m[3] - m[2] * m[1];
			return d;
		}
		function menorComplementar(matriz, linha, coluna) {
			var ordem = Math.sqrt(matriz.length);
			var novaMatriz = [];
			var i, j;
			for (var p = 0; p < matriz.length; p++) {
				i = Math.floor(p / ordem) + 1; //linha
				j = (p % ordem) + 1; // coluna
				if (linha != i && coluna != j) {
					novaMatriz.push(matriz[p]);
				}
			}
			return novaMatriz;
		}
		function d(m) {
			var d0 = 0;
			var ordem = Math.sqrt(m.length);
			if (ordem == 2) return d2(m);
			for (var c = 1; c <= ordem; c++) {
				var mc = menorComplementar(m, 1, c);
				var dmc = d(mc);
				d0 += m[c - 1] * Math.pow(-1, c + 1) * dmc; 
			}
			return d0;
		}
		window.onload = function() {
			var tableMatriz = document.getElementById("tableMatriz");
			var calcularDeterminante = document.getElementById("calcularDeterminante");
			var ordem = document.getElementById("ordem");
			var determinante = document.getElementById("determinante");
			
			var criarInputs = function() {
				tableMatriz.innerHTML = "";
				var o = parseInt(ordem.value);
				for (var i = 0; i < o; i++) {
					var tr = document.createElement("tr");
					for (var j = 0; j < o; j++) {
						var td = document.createElement("td");
						var input = document.createElement("input");
						input.setAttribute("size", 2);
						input.setAttribute("class", "input");
						td.appendChild(input);
						tr.appendChild(td);
					}
					tableMatriz.appendChild(tr);
				}
				determinante.value = "";
			}
			
			var getMatriz = function() {
				var inputs = tableMatriz.getElementsByTagName("input");
				var matriz = [];
				for (var i = 0; i < inputs.length; i++) {
					matriz.push(parseInt(inputs[i].value));
				}
				return matriz;
			}
			ordem.addEventListener("change", criarInputs);
			calcularDeterminante.addEventListener("click", function() {
				var matriz = getMatriz();
				determinante.value = d(matriz);
			});
			criarInputs();
		}
		</script>
		<style>
		#container {
			text-align: center;
		}
		#container * {
			margin: 5px;
		}
		#tableMatriz {
			display: inline-block;
		}
		.input {
			text-align: center;
		}
		</style>
		<meta charset="utf-8"/>
		<meta name="viewport" content="width=device-width">
	</head> 
	<body>
		<div id="container">
			<h1>Determinante</h1>
			<label>Ordem da matriz</label><br>
			<input type="number" min="2" value="2" id="ordem"/><br>
			<table id="tableMatriz"></table><br>
			<button id="calcularDeterminante">Calcular Determinante</button><br>
			<input type="text" id="determinante" class="input"/><br>
			<p><small>by Milton Rodrigues - iomltn@gmail.com</small></p>
		</div>
	</body>
</html>