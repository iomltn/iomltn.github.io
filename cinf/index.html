<!DOCTYPE html>
<html lang="pt-br">
	<head>
		<meta charset="utf-8"/>
		<style>
		* {
			font-family: Arial;
		}
		#media {
			background:  #000066;
			color: white;
			padding: 10px;
		}
		button {
			padding: 10px;
			background: #0066ff;
			color: white;
			border: 0;
			cursor: pointer;
			font-weight: bold;
			font-size: 15px;
		}
		input, label {
			font-size: 20px;
		}
		b {
			font-size: 15px;
		}
		#media {
			font-size: 30px;
		}
		#f {
			background: #ff6666;
		}
		td, th {
			text-align: center;
			padding: 5px;
		}
		#resultado {
			border-collapse: collapse;
		}
		</style>
		<script>
		window.onload = function() {
			var btnCalc = document.getElementById("calc");
			btnCalc.addEventListener("click", function() {
				var ps1 = parseInt(document.getElementById("ps1").value);
				var ps2 = parseInt(document.getElementById("ps2").value);
				var ssvs = parseInt(document.getElementById("ssvs").value);
				var scvs = parseInt(document.getElementById("scvs").value);
				var sa = parseInt(document.getElementById("sa").value);
				var a = parseInt(document.getElementById("a").value);
				var f = parseInt(document.getElementById("f").value);
				
				if (isNaN(ps1)) ps1 = 0;
				if (isNaN(ps2)) ps2 = 0;
				if (isNaN(ssvs)) ssvs = 0;
				if (isNaN(scvs)) scvs = 0;
				if (isNaN(sa)) sa = 0;
				if (isNaN(a)) a = 0;
				if (isNaN(f)) f = 0;
				
				var ta = ps1 + ps2 + ssvs + scvs + sa + a + f; // Total de alunos
				var fp = 10/6;// fraçao de peso.
				
				var media = 0;
				if (ta > 0) {
					media = (ps1 / ta) * (10 - (5 * fp)) + (ps2 / ta) * (10 - (4 * fp)) + (ssvs / ta) * (10 - (3 * fp)) + (scvs / ta) * (10 - (2 * fp)) + (sa / ta) * (10 - fp) + (a / ta) * 10;
				}	
				
				var getInfantil = function() {
					var inf4 = document.getElementById("inf4");
					if (inf4.checked) {
						return "Infantil IV";
					}
					return "Infantil V";
				}
				
				var formatFloat = function(v) {
					return v.toFixed(2).replace(".", ",");
				}
				
				var etapa = document.getElementById("etapa");
				etapa.innerHTML = " do " + getInfantil();
				
				var tabelaResultado = document.getElementById("resultado");
				tabelaResultado.innerHTML = '';

				var qtdAlunos = [ps1, ps2, ssvs, scvs, sa, a];

				var tr = document.createElement("tr");
				var trq = document.createElement("tr");
				var trp = document.createElement("tr");
				var colunas = ["Pré-silábico I", "Pré-silábico II", "Silábico Sem Valor Sonoro", "Silábico Com Valor Sonoro", "Silábico Alfabético", "Alfabético"];
				for (var i = 0; i < colunas.length; i++) {
					var th = document.createElement("th");
					th.innerHTML = colunas[i];
					tr.appendChild(th);
					
					var td = document.createElement("td");
					td.innerHTML = qtdAlunos[i];
					trq.appendChild(td);
					
					td = document.createElement("td");
					td.innerHTML = formatFloat((qtdAlunos[i] / ta) * 100) + " %";
					trp.appendChild(td);
				}
				tabelaResultado.appendChild(tr);
				tabelaResultado.appendChild(trq);
				tabelaResultado.appendChild(trp);
				
				
				document.getElementById("media").innerHTML = media.toFixed(2).replace('.', ',');
				document.getElementById("ta").innerHTML = "Total de alunos: " + ta;
				window.scrollTo(0,0);
			});
		}
		</script>
		<meta name="viewport" content="width=device-width">
	</head>
	<body>
	<center>
		<h1>Calculadora Infantil</h1>
		<h3>Média da turma<span id="etapa"></span>:</h3>
		<h2 id="media">0,00</h2>
		<table id="resultado" border="1">
		</table><br>
		<p id="ta">Informe a quantidade de alunos em cada nível</p>
	</center>
		<p>
			<b>Etapa</b><br>
			<input type="radio" name="infantil" id="inf4"/> <label for="inf4">Infantil IV</label> <input type="radio" name="infantil" id="inf5"/> <label for="inf5">Infantil V</label>
		</p>
		<p>
			<b>Pré-silábico I</b><br>
			<input type="number" id="ps1" value="0" min="0"/>
		</p>
		<p>
			<b>Pré-silábico II</b><br>
			<input type="number" id="ps2" value="0" min="0"/>
		</p>
		<p>
			<b>Silábico Sem Valor Sonoro</b><br>
			<input type="number" id="ssvs" value="0" min="0"/>
		</p>
		<p>
			<b>Silábico Com Valor Sonoro</b><br>
			<input type="number" id="scvs" value="0" min="0"/>
		</p>
		<p>
			<b>Silábico Alfabético</b><br>
			<input type="number" id="sa" value="0" min="0"/>
		</p>
		<p>
			<b>Alfabético</b><br>
			<input type="number" id="a" value="0" min="0"/>
		</p>
		<p>
			<b>Alunos que faltaram</b><br>
			<input type="number" id="f" value="0" min="0"/>
		</p>
		<center>
			<button id="calc">Calcular Média</button>
			<p><small>by Milton Rodrigues - iomltn@gmail.com</small></p>
		</center>
	</body>
</html>
